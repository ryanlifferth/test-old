
<header>
    <div class="container">
        <a href="@Url.Action("Index", "Default")" class="logo navbar-brand">
            <h1 class="font-effect-shadow-multiple">Ryan.Drag&Drop</h1>
            <span class="logo-img"></span>
        </a>
        <ul class="nav navbar-nav">
            @BuildMenuItem("Home", "Index", "Default")
            @BuildMenuItem("Grid", "grid-jquery", "Default", null, null, "jQuery")
            @BuildMenuItem("Grid", "grid-angular", "Default", null, null, "Angular")
            @BuildMenuItem("Pics", "pics", "Default")
            @BuildMenuItem("Report", "report-review", "Default", null, null, "Review")
            @*@BuildMenuItem("About Us", "About-Us", "Default")*@
        </ul>
    </div>
</header>

@functions {


    private HtmlString BuildMenuItem(string text, string action, string controller, string liClasses = "", string linkClasses = "", string subText = "")
    {
        var link = new System.UriBuilder(Request.Url.AbsoluteUri) { Path = Url.Action(action, controller) }.Uri;
        var currentPage = Request.Url;
        var liCss = string.IsNullOrEmpty(liClasses) ? new System.Text.StringBuilder() : new System.Text.StringBuilder(liClasses).Append(" ");

        if (link.AbsoluteUri == currentPage.AbsoluteUri)
        {
            liCss.Append("active");
        }
        else if (currentPage.AbsolutePath == "/Default/Index" && (controller.ToLower() == "default" && action.ToLower() == "index"))
        {
            // Home page
            liCss.Append("active");
        }
        else if (currentPage.AbsolutePath == "/" && (controller.ToLower() == "default" && action.ToLower() == "index"))
        {
            // Home page
            liCss.Append("active");
        }

        var sb = new System.Text.StringBuilder(@"<li class="""+ liCss.ToString() + @""">");

        sb.Append(@"<a href=""" + Url.Action(action, controller) + @"""");
        if (!string.IsNullOrEmpty(linkClasses)) sb.Append(@" class=""").Append(linkClasses).Append(@"""");
        sb.Append(@">");
        sb.Append(Html.Raw(text));
        if (!string.IsNullOrEmpty(subText)) sb.Append(@"<span class=""menu-sub-text"">").Append(Html.Raw(subText)).Append("</span>");
        sb.Append(@"</a>");

        sb.Append(@"</li>");

        return new HtmlString(sb.ToString());
    }

}